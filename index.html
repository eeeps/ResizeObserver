
<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Resize Observer</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED" rel="stylesheet" type="text/css">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <header>
    <p data-fill-with="logo"><a href="https://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"></a> </p>
    <h1 class="p-name no-ref" id="title">Resize Observer</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2016-09-14">14 September 2016</time></span></h2>
   </header>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://github.com/WICG/ResizeObserver/">https://github.com/WICG/ResizeObserver/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:atotic@google.com">Aleks Totic</a> (<span class="p-org org">Google</span>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification describes an API for observing changes to Element’s size.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. Other
    documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this
    technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
    reports index</a> at http://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="http://www.w3.org/2010/webperf/">Web Performance Working Group</a> as an Editors Draft. This document is intended to become a W3C Recommendation.

    Feedback and comments on this specification are welcome. Please use <a href="https://github.com/w3c/reporting/issues">Github issues</a>.
    Discussions may also be found in the <a href="http://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org archives</a>. </p>
   <p> Publication as an Editors Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/45211/status" rel="disclosure">public list of any
    patent disclosures</a> made in connection with the deliverables of the group; that page also
    includes instructions for disclosing a patent. An individual who has actual knowledge of a
    patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
   <p> This document is governed by the <a href="http://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#api"><span class="secno">2</span> <span class="content">Resize Observer API</span></a>
     <ol class="toc">
      <li><a href="#resize-observer-interface"><span class="secno">2.1</span> <span class="content">ResizeObserver interface</span></a>
      <li><a href="#resize-observer-callback"><span class="secno">2.2</span> <span class="content">ResizeObserverCallback</span></a>
      <li><a href="#resize-observer-entry-interface"><span class="secno">2.3</span> <span class="content">ResizeObserverEntry</span></a>
      <li><a href="#resize-observation-interface"><span class="secno">2.4</span> <span class="content">ResizeObservation</span></a>
     </ol>
    <li>
     <a href="#processing-model"><span class="secno">3</span> <span class="content">Processing Model</span></a>
     <ol class="toc">
      <li>
       <a href="#internal-slot-definitions"><span class="secno">3.1</span> <span class="content">Internal Slot Definitions</span></a>
       <ol class="toc">
        <li><a href="#document-slots"><span class="secno">3.1.1</span> <span class="content">Document</span></a>
        <li><a href="#resize-observer-slots"><span class="secno">3.1.2</span> <span class="content">ResizeObserver</span></a>
       </ol>
      <li>
       <a href="#css-definitions"><span class="secno">3.2</span> <span class="content">CSS Definitions</span></a>
       <ol class="toc">
        <li><a href="#content-rect-h"><span class="secno">3.2.1</span> <span class="content">content rect</span></a>
       </ol>
      <li>
       <a href="#algorithms"><span class="secno">3.3</span> <span class="content">Algorithms</span></a>
       <ol class="toc">
        <li><a href="#gather-active-observations-h"><span class="secno">3.3.1</span> <span class="content">Gather active observations at depth</span></a>
        <li><a href="#has-active-observations-h"><span class="secno">3.3.2</span> <span class="content">Has active observations</span></a>
        <li><a href="#has-skipped-observations-h"><span class="secno">3.3.3</span> <span class="content">Has skipped observations</span></a>
        <li><a href="#broadcast-resize-notifications-h"><span class="secno">3.3.4</span> <span class="content">Broadcast active observations</span></a>
        <li><a href="#deliver-resize-error"><span class="secno">3.3.5</span> <span class="content">Deliver Resize Loop Error</span></a>
        <li><a href="#calculate-depth-for-node-h"><span class="secno">3.3.6</span> <span class="content">Calculate depth for node</span></a>
       </ol>
      <li><a href="#lifetime"><span class="secno">3.4</span> <span class="content">ResizeObserver Lifetime</span></a>
      <li>
       <a href="#integrations"><span class="secno">3.5</span> <span class="content">External Spec Integrations</span></a>
       <ol class="toc">
        <li><a href="#html-event-loop"><span class="secno">3.5.1</span> <span class="content"> HTML Processing Model: Event Loop</span></a>
       </ol>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Responsive Web Components need to respond to <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect-1">content rect</a> size changes. An example is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code> that displays a map:</p>
   <ul>
    <li data-md="">
     <p>it displays a map by tiling its content box with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code> tiles.</p>
    <li data-md="">
     <p>when resized, it must redo the tiling.</p>
   </ul>
   <p>Responsive Web Applications can already respond to <a data-link-type="dfn" href="https://www.w3.org/TR/css3-positioning/#viewport">viewport</a> size changes.
This is done with CSS media queries, or window.<code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#eventdef-window-resize">resize</a></code> event.</p>
   <p>The ResizeObserver API is an interface for observing changes
to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>'s <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect-2">content rect</a>’s width and height. It is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>'s
counterpart to window.<code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#eventdef-window-resize">resize</a></code> event.</p>
   <p>ResizeObserver’s notifications can be used to respond to changes in <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>'s size. Some interesting facts about these observations:</p>
   <ul>
    <li data-md="">
     <p>observation will fire when watched Element is inserted/removed from DOM.</p>
    <li data-md="">
     <p>observation will fire when watched Element display gets set to none.</p>
    <li data-md="">
     <p>observations do not fire for non-replaced inline Elements.</p>
    <li data-md="">
     <p>observations will not be triggered by CSS transforms.</p>
    <li data-md="">
     <p>observation will fire when observation starts if Element has display, and Element’s size is not 0,0.</p>
   </ul>
   <div class="example" id="example-cc41daa3">
    <a class="self-link" href="#example-cc41daa3"></a>
<pre class="highlight"><span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">"elipse"</span> <span class="na">style</span><span class="o">=</span><span class="s">"display:block"</span><span class="p">></span><span class="p">&lt;</span><span class="p">/</span><span class="nt">canvas</span><span class="p">></span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"menu"</span> <span class="na">style</span><span class="o">=</span><span class="s">"display:block;width:100px"</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"hamburger.jpg"</span> <span class="na">style</span><span class="o">=</span><span class="s">"width:24px;height:24px"</span><span class="p">></span>
    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"title"</span><span class="p">></span>menu title<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">></span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">div</span><span class="p">></span>
</pre>
<pre class="highlight"><span class="c1">// In response to resize, elipse paints an elipse inside a canvas
</span>document<span class="p">.</span>querySelector<span class="p">(</span><span class="s1">'#elipse'</span><span class="p">)</span><span class="p">.</span>handleResize <span class="o">=</span> entry <span class="o">=></span> <span class="p">{</span>
    <span class="kd">let</span> rx <span class="o">=</span> Math<span class="p">.</span>floor<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>width <span class="o">/</span> <span class="mi">2</span><span class="p">)</span><span class="p">;</span>
    <span class="kd">let</span> ry <span class="o">=</span> Math<span class="p">.</span>floor<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>height <span class="o">/</span> <span class="mi">2</span><span class="p">)</span><span class="p">;</span>
    <span class="kd">let</span> ctx <span class="o">=</span> entry<span class="p">.</span>target<span class="p">.</span>getContext<span class="p">(</span><span class="s1">'2d'</span><span class="p">)</span><span class="p">;</span>
    ctx<span class="p">.</span>beginPath<span class="p">(</span><span class="p">)</span><span class="p">;</span>
    ctx<span class="p">.</span>ellipse<span class="p">(</span>rx<span class="p">,</span> ry<span class="p">,</span> rx<span class="p">,</span> ry<span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> Math<span class="p">.</span>PI<span class="p">)</span><span class="p">;</span>
    ctx<span class="p">.</span>stroke<span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// In response to resize, change title visibility depending on width
</span>document<span class="p">.</span>querySelector<span class="p">(</span><span class="s1">'#menu'</span><span class="p">)</span><span class="p">.</span>handleResize <span class="o">=</span> entry <span class="o">=></span> <span class="p">{</span>
    <span class="kd">let</span> title <span class="o">=</span> entry<span class="p">.</span>target<span class="p">.</span>querySelector<span class="p">(</span><span class="s2">".title"</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>width <span class="o">&lt;</span> <span class="mi">40</span><span class="p">)</span>
        title<span class="p">.</span>style<span class="p">.</span>display <span class="o">=</span> <span class="s2">"none"</span><span class="p">;</span>
    <span class="k">else</span>
        title<span class="p">.</span>style<span class="p">.</span>display <span class="o">=</span> <span class="s2">"inline-block"</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> ro <span class="o">=</span> <span class="k">new</span> ResizeObserver<span class="p">(</span> entries <span class="o">=></span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span>entry <span class="k">of</span> entries<span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> cs <span class="o">=</span> window<span class="p">.</span>getComputedStyle<span class="p">(</span>entry<span class="p">.</span>target<span class="p">)</span><span class="p">;</span>
    console<span class="p">.</span>log<span class="p">(</span><span class="s1">'watching element:'</span><span class="p">,</span> entry<span class="p">.</span>target<span class="p">)</span><span class="p">;</span>
    console<span class="p">.</span>log<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>width<span class="p">,</span><span class="s1">' is '</span><span class="p">,</span> cs<span class="p">.</span>width<span class="p">)</span><span class="p">;</span>
    console<span class="p">.</span>log<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>height<span class="p">,</span><span class="s1">' is '</span><span class="p">,</span> cs<span class="p">.</span>height<span class="p">)</span><span class="p">;</span>
    console<span class="p">.</span>log<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>top<span class="p">,</span><span class="s1">' is '</span><span class="p">,</span> cs<span class="p">.</span>paddingTop<span class="p">)</span><span class="p">;</span>
    console<span class="p">.</span>log<span class="p">(</span>entry<span class="p">.</span>contentRect<span class="p">.</span>left<span class="p">,</span><span class="s1">' is '</span><span class="p">,</span> cs<span class="p">.</span>paddignLeft<span class="p">)</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span>entry<span class="p">.</span>handleResize<span class="p">)</span>
        entry<span class="p">.</span>handleResize<span class="p">(</span>entry<span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
ro<span class="p">.</span>observe<span class="p">(</span>document<span class="p">.</span>querySelector<span class="p">(</span><span class="s1">'#elipse'</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
ro<span class="p">.</span>observe<span class="p">(</span>document<span class="p">.</span>querySelector<span class="p">(</span><span class="s1">'#menu'</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="2" id="api"><span class="secno">2. </span><span class="content">Resize Observer API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="resize-observer-interface"><span class="secno">2.1. </span><span class="content">ResizeObserver interface</span><a class="self-link" href="#resize-observer-interface"></a></h3>
   <p>The ResizeObserver interface is used to observe changes to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>'s <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect-3">content rect</a>.</p>
   <p>It is modeled after <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver">MutationObserver</a></code> and <a data-link-type="dfn" href="https://github.com/WICG/IntersectionObserver/index.html#intersection-observer-interface">IntersectionObserver</a>.</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobserver-resizeobserver" id="ref-for-dom-resizeobserver-resizeobserver-1">Constructor</a>(<a class="n" data-link-type="idl-name" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback-1">ResizeObserverCallback</a> <dfn class="nv idl-code" data-dfn-for="ResizeObserver/ResizeObserver(callback)" data-dfn-type="argument" data-export="" id="dom-resizeobserver-resizeobserver-callback-callback">callback<a class="self-link" href="#dom-resizeobserver-resizeobserver-callback-callback"></a></dfn>),
    <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="resizeobserver">ResizeObserver</dfn> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-observe" id="ref-for-dom-resizeobserver-observe-1">observe</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <dfn class="nv idl-code" data-dfn-for="ResizeObserver/observe(target)" data-dfn-type="argument" data-export="" id="dom-resizeobserver-observe-target-target">target<a class="self-link" href="#dom-resizeobserver-observe-target-target"></a></dfn>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-unobserve" id="ref-for-dom-resizeobserver-unobserve-1">unobserve</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <dfn class="nv idl-code" data-dfn-for="ResizeObserver/unobserve(target)" data-dfn-type="argument" data-export="" id="dom-resizeobserver-unobserve-target-target">target<a class="self-link" href="#dom-resizeobserver-unobserve-target-target"></a></dfn>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-disconnect" id="ref-for-dom-resizeobserver-disconnect-1">disconnect</a>();
};
</pre>
   <div>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="constructor" data-export="" data-lt="ResizeObserver(callback)" id="dom-resizeobserver-resizeobserver">new ResizeObserver(callback)</dfn></p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>Let <var>this</var> be a new <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-1">ResizeObserver</a></code> object.</p>
       <li data-md="">
        <p>Set <var>this</var> internal <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-callback" id="ref-for-dom-resizeobserver-callback-1">callback</a></code> slot to callback.</p>
       <li data-md="">
        <p>Add <var>this</var> to <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers-1">resizeObservers</a></code> slot.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export="" id="dom-resizeobserver-observe">observe(target)</dfn></p>
     <dd data-md="">
      <p>Adds target to the list of observed elements.</p>
      <ol>
       <li data-md="">
        <p>If <var>target</var> is in <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-1">observationTargets</a></code> slot, return.</p>
       <li data-md="">
        <p>Let <var>resizeObservation</var> be new <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-1">ResizeObservation</a></code>(<var>target</var>).</p>
       <li data-md="">
        <p>Add the <var>resizeObservation</var> to the <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-2">observationTargets</a></code> slot.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export="" id="dom-resizeobserver-unobserve">unobserve(target)</dfn></p>
     <dd data-md="">
      <p>Removes <var>target</var> from the list of observed elements.</p>
      <ol>
       <li data-md="">
        <p>Let <var>observation</var> be <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-2">ResizeObservation</a></code> in <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-3">observationTargets</a></code> whose target slot is <var>target</var>.</p>
       <li data-md="">
        <p>If <var>observation</var> is not found, return.</p>
       <li data-md="">
        <p>Remove <var>observation</var> from <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-4">observationTargets</a></code></p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export="" id="dom-resizeobserver-disconnect">disconnect()</dfn></p>
     <dd data-md="">
      <p>1) Clear the <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-5">observationTargets</a></code> list.</p>
      <p>2) Clear the <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-1">activeTargets</a></code> list.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="2.2" id="resize-observer-callback"><span class="secno">2.2. </span><span class="content">ResizeObserverCallback</span><a class="self-link" href="#resize-observer-callback"></a></h3>
<pre class="idl highlight def"><span class="kt">callback</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="callback" data-export="" id="callbackdef-resizeobservercallback">ResizeObserverCallback</dfn> = <span class="kt">void</span> (<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#resizeobserverentry" id="ref-for-resizeobserverentry-1">ResizeObserverEntry</a>> <dfn class="nv idl-code" data-dfn-for="ResizeObserverCallback" data-dfn-type="argument" data-export="" id="dom-resizeobservercallback-entries">entries<a class="self-link" href="#dom-resizeobservercallback-entries"></a></dfn>, <a class="n" data-link-type="idl-name" href="#resizeobserver" id="ref-for-resizeobserver-2">ResizeObserver</a> <dfn class="nv idl-code" data-dfn-for="ResizeObserverCallback" data-dfn-type="argument" data-export="" id="dom-resizeobservercallback-observer">observer<a class="self-link" href="#dom-resizeobservercallback-observer"></a></dfn>)
</pre>
   <p>This callback delivers <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-3">ResizeObserver</a></code>'s notifications. It is invoked by a <a data-link-type="dfn" href="#broadcast-active-observations" id="ref-for-broadcast-active-observations-1">broadcast active observations</a> algorithm.</p>
   <h3 class="heading settled" data-level="2.3" id="resize-observer-entry-interface"><span class="secno">2.3. </span><span class="content">ResizeObserverEntry</span><a class="self-link" href="#resize-observer-entry-interface"></a></h3>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobserverentry-resizeobserverentry" id="ref-for-dom-resizeobserverentry-resizeobserverentry-1">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <dfn class="nv idl-code" data-dfn-for="ResizeObserverEntry/ResizeObserverEntry(target)" data-dfn-type="argument" data-export="" id="dom-resizeobserverentry-resizeobserverentry-target-target">target<a class="self-link" href="#dom-resizeobserverentry-resizeobserverentry-target-target"></a></dfn>)
]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="resizeobserverentry">ResizeObserverEntry</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Element" href="#dom-resizeobserverentry-target" id="ref-for-dom-resizeobserverentry-target-1">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly">DOMRectReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMRectReadOnly" href="#dom-resizeobserverentry-contentrect" id="ref-for-dom-resizeobserverentry-contentrect-1">contentRect</a>;
};
</pre>
   <div>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export="" id="dom-resizeobserverentry-target">target</dfn>, <span> of type <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a>, readonly</span></p>
     <dd data-md="">
      <p>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code> whose size has changed.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export="" id="dom-resizeobserverentry-contentrect">contentRect</dfn>, <span> of type <a data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly">DOMRectReadOnly</a>, readonly</span></p>
     <dd data-md="">
      <p><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>'s <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect-4">content rect</a> when <code class="idl"><a data-link-type="idl" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback-2">ResizeObserverCallback</a></code> is invoked.</p>
    </dl>
   </div>
   <div>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="constructor" data-export="" data-lt="ResizeObserverEntry(target)" id="dom-resizeobserverentry-resizeobserverentry">new ResizeObserverEntry(target)</dfn></p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>Let <var>this</var> be a new <code class="idl"><a data-link-type="idl" href="#resizeobserverentry" id="ref-for-resizeobserverentry-2">ResizeObserverEntry</a></code>.</p>
       <li data-md="">
        <p>Set <var>this</var> <code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-target" id="ref-for-dom-resizeobserverentry-target-2">target</a></code> slot to <var>target</var>.</p>
       <li data-md="">
        <p>If <var>target</var> is not an SVG element do these steps:</p>
        <ol>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.width to <var>target</var>.<a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width">content width</a>.</p>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.height to <var>target</var>.<a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-height">content height</a>.</p>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.top to <var>target</var>.<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-top">padding top</a>.</p>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.left to <var>target</var>.<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-left">padding left</a>.</p>
        </ol>
       <li data-md="">
        <p>If <var>target</var> is an SVG element do these steps:</p>
        <ol>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.top and <var>this</var>.contentRect.left to 0.</p>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.width to <var>target</var>.<a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes">bounding box</a>.width.</p>
         <li data-md="">
          <p>Set <var>this</var>.contentRect.height to <var>target</var>.<a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes">bounding box</a>.height.</p>
        </ol>
      </ol>
    </dl>
   </div>
   <h3 class="heading settled" data-level="2.4" id="resize-observation-interface"><span class="secno">2.4. </span><span class="content">ResizeObservation</span><a class="self-link" href="#resize-observation-interface"></a></h3>
    ResizeObservation holds observation information for a single <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>. This
interface is not visible to Javascript.
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobservation-resizeobservation" id="ref-for-dom-resizeobservation-resizeobservation-1">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <dfn class="nv idl-code" data-dfn-for="ResizeObservation/ResizeObservation(target)" data-dfn-type="argument" data-export="" id="dom-resizeobservation-resizeobservation-target-target">target<a class="self-link" href="#dom-resizeobservation-resizeobservation-target-target"></a></dfn>)
]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="resizeobservation">ResizeObservation</dfn> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Element" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-1">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">float</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="float" href="#dom-resizeobservation-broadcastwidth" id="ref-for-dom-resizeobservation-broadcastwidth-1">broadcastWidth</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">float</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="float" href="#dom-resizeobservation-broadcastheight" id="ref-for-dom-resizeobservation-broadcastheight-1">broadcastHeight</a>;
    <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobservation-isactive" id="ref-for-dom-resizeobservation-isactive-1">isActive</a>();
};
</pre>
   <div>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export="" id="dom-resizeobservation-target">target</dfn>, <span> of type <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a>, readonly</span></p>
     <dd data-md="">
      <p>The observed <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export="" id="dom-resizeobservation-broadcastwidth">broadcastWidth</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-float">float</a>, readonly</span></p>
     <dd data-md="">
      <p>Width of last broadcast <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width">content width</a>.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export="" id="dom-resizeobservation-broadcastheight">broadcastHeight</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-float">float</a>, readonly</span></p>
     <dd data-md="">
      <p>Width of last broadcast <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-height">content height</a>.</p>
    </dl>
   </div>
   <div>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="constructor" data-export="" data-lt="ResizeObservation(target)" id="dom-resizeobservation-resizeobservation">new ResizeObservation(target)</dfn></p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>Let <var>this</var> be a new <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-3">ResizeObservation</a></code> object</p>
       <li data-md="">
        <p>Set <var>this</var> internal <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-2">target</a></code> slot to <var>target</var></p>
       <li data-md="">
        <p>Set <var>this</var> <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastwidth" id="ref-for-dom-resizeobservation-broadcastwidth-2">broadcastWidth</a></code> slot to 0.</p>
       <li data-md="">
        <p>Set <var>this</var> <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastheight" id="ref-for-dom-resizeobservation-broadcastheight-2">broadcastHeight</a></code> slot to 0.</p>
      </ol>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="method" data-export="" id="dom-resizeobservation-isactive">isActive()</dfn></p>
     <dd data-md="">
      <ol>
       <li data-md="">
        <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-3">target</a></code> is an HTML element do these steps:</p>
        <ol>
         <li data-md="">
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-4">target</a></code>.<a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width">content width</a> != <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastwidth" id="ref-for-dom-resizeobservation-broadcastwidth-3">broadcastWidth</a></code> return true.</p>
         <li data-md="">
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-5">target</a></code>.<a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-height">content height</a> != <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastheight" id="ref-for-dom-resizeobservation-broadcastheight-3">broadcastHeight</a></code> return true.</p>
        </ol>
       <li data-md="">
        <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-6">target</a></code> is an SVGGraphicsElement do these steps:</p>
        <ol>
         <li data-md="">
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-7">target</a></code>.bounding box width != <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastwidth" id="ref-for-dom-resizeobservation-broadcastwidth-4">broadcastWidth</a></code> return true.</p>
         <li data-md="">
          <p>If <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-8">target</a></code>.bounding box height != <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastheight" id="ref-for-dom-resizeobservation-broadcastheight-4">broadcastHeight</a></code> return true.</p>
        </ol>
       <li data-md="">
        <p>return false.</p>
      </ol>
    </dl>
   </div>
   <h2 class="heading settled" data-level="3" id="processing-model"><span class="secno">3. </span><span class="content">Processing Model</span><a class="self-link" href="#processing-model"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="internal-slot-definitions"><span class="secno">3.1. </span><span class="content">Internal Slot Definitions</span><a class="self-link" href="#internal-slot-definitions"></a></h3>
   <h4 class="heading settled" data-level="3.1.1" id="document-slots"><span class="secno">3.1.1. </span><span class="content">Document</span><a class="self-link" href="#document-slots"></a></h4>
   <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a> has a <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export="" id="dom-document-resizeobservers">resizeObservers</dfn> slot that is a list of <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-4">ResizeObserver</a></code>s in this document. It is initialized to empty.</p>
   <h4 class="heading settled" data-level="3.1.2" id="resize-observer-slots"><span class="secno">3.1.2. </span><span class="content">ResizeObserver</span><a class="self-link" href="#resize-observer-slots"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-5">ResizeObserver</a></code> has a <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export="" id="dom-resizeobserver-callback">callback</dfn> slot, initialized by constructor.</p>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-6">ResizeObserver</a></code> has an <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export="" id="dom-resizeobserver-observationtargets">observationTargets</dfn> slot, which is a list of <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-4">ResizeObservation</a></code>s.
It represents all Elements being observed.</p>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-7">ResizeObserver</a></code> has a <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export="" id="dom-resizeobserver-activetargets">activeTargets</dfn> slot, which is a list of <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-5">ResizeObservation</a></code>s. It represents all Elements whose size has changed since last observation broadcast that are eligible for broadcast.</p>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-8">ResizeObserver</a></code> has a <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export="" id="dom-resizeobserver-skippedtargets">skippedTargets</dfn> slot, which is a list of <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation-6">ResizeObservation</a></code>s. It represents all Elements whose size has changed since last observation broadcast that are **not** eligible for broadcast</p>
   <h3 class="heading settled" data-level="3.2" id="css-definitions"><span class="secno">3.2. </span><span class="content">CSS Definitions</span><a class="self-link" href="#css-definitions"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="content-rect-h"><span class="secno">3.2.1. </span><span class="content">content rect</span><a class="self-link" href="#content-rect-h"></a></h4>
    DOM <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="content-rect">content rect</dfn> is a rect whose:
   <ul>
    <li data-md="">
     <p>width is <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width">content width</a></p>
    <li data-md="">
     <p>height is <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-height">content height</a></p>
    <li data-md="">
     <p>top is <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-top">padding top</a></p>
    <li data-md="">
     <p>left is <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-left">padding left</a></p>
   </ul>
   <p><a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width">content width</a> spec does not mention how <a data-link-type="dfn" href="https://www.w3.org/TR/css3-multicol/#">multi-column</a> layout affects content box. In this spec, content width of an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code> inside <a data-link-type="dfn" href="https://www.w3.org/TR/css3-multicol/#">multi-column</a> is the result of getComputedStyle(<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element">Element</a></code>).width. This currently evaluates to width of the first column.</p>
   <p>Having content rect position be padding-top/left is useful for absolute positioning of target’s children. Absolute position coordinate space origin is topLeft of the padding rect.</p>
   <p>Watching content rect means that:</p>
   <ul>
    <li data-md="">
     <p>observation will fire when watched Element is inserted/removed from DOM.</p>
    <li data-md="">
     <p>observation will fire when watched Element display gets set to none.</p>
    <li data-md="">
     <p>non-replaced inline Elements will always have an empty content rect.</p>
    <li data-md="">
     <p>observations will not be triggered by CSS transforms.</p>
   </ul>
   <p>Web content can also contain SVG elements. SVG Elements define <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes">bounding box</a> instead of a content box.
Content rect for <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/#InterfaceSVGGraphicsElementtypes.html#InterfaceSVGGraphicsElement">SVGGraphicsElement</a>s is a rect whose:</p>
   <ul>
    <li data-md="">
     <p>width is <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes">bounding box</a> width</p>
    <li data-md="">
     <p>height is <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes">bounding box</a> height</p>
    <li data-md="">
     <p>top and left are 0</p>
   </ul>
   <h3 class="heading settled" data-level="3.3" id="algorithms"><span class="secno">3.3. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h3>
   <h4 class="heading settled" data-level="3.3.1" id="gather-active-observations-h"><span class="secno">3.3.1. </span><span class="content">Gather active observations at depth</span><a class="self-link" href="#gather-active-observations-h"></a></h4>
   <p>It computes all active observations for a <var>document</var>. To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gather-active-observations-at-depth">gather active observations at depth</dfn>, run these steps:</p>
   <ol>
    <li data-md="">
     <p>Let <var>depth</var> be the depth passed in.</p>
    <li data-md="">
     <p>For each <var>observer</var> in <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers-2">resizeObservers</a></code> run these steps:</p>
     <ol>
      <li data-md="">
       <p>Clear <var>observer</var>’s <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-2">activeTargets</a></code>, and <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets-1">skippedTargets</a></code></p>
      <li data-md="">
       <p>For each <var>observation</var> in <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets-6">observationTargets</a></code> run this step:</p>
       <ol>
        <li data-md="">
         <p>If <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-isactive" id="ref-for-dom-resizeobservation-isactive-2">isActive()</a></code> is true</p>
         <ol>
          <li data-md="">
           <p>Let <var>targetDepth</var> be result of <a data-link-type="dfn" href="#calculate-depth-for-node" id="ref-for-calculate-depth-for-node-1">calculate depth for node</a> for <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-9">target</a></code>.</p>
          <li data-md="">
           <p>If <var>targetDepth</var> is greater than <var>depth</var> then add <var>observation</var> to <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-3">activeTargets</a></code>.</p>
          <li data-md="">
           <p>Else add <var>observation</var> to <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets-2">skippedTargets</a></code>.</p>
         </ol>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="3.3.2" id="has-active-observations-h"><span class="secno">3.3.2. </span><span class="content">Has active observations</span><a class="self-link" href="#has-active-observations-h"></a></h4>
   <p>To determine if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="has-active-observations">has active observations</dfn> run these steps:</p>
   <ol>
    <li data-md="">
     <p>For each <var>observer</var> in <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers-3">resizeObservers</a></code> run this step:</p>
     <ol>
      <li data-md="">
       <p>If <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-4">activeTargets</a></code> is not empty, return true.</p>
     </ol>
    <li data-md="">
     <p>return false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.3.3" id="has-skipped-observations-h"><span class="secno">3.3.3. </span><span class="content">Has skipped observations</span><a class="self-link" href="#has-skipped-observations-h"></a></h4>
   <p>To determine if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="has-skipped-observations">has skipped observations</dfn> run these steps:</p>
   <ol>
    <li data-md="">
     <p>For each <var>observer</var> in <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers-4">resizeObservers</a></code> run this step:</p>
     <ol>
      <li data-md="">
       <p>If <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets-3">skippedTargets</a></code> is not empty, return true.</p>
     </ol>
    <li data-md="">
     <p>return false.</p>
   </ol>
   <h4 class="heading settled" data-level="3.3.4" id="broadcast-resize-notifications-h"><span class="secno">3.3.4. </span><span class="content">Broadcast active observations</span><a class="self-link" href="#broadcast-resize-notifications-h"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="broadcast-active-observations">broadcast active observations</dfn> delivers all active observations
in a document, and returns the depth of the shallowest broadcast target depth.</p>
   <p>To broadcast active observations for a <var>document</var>,
run these steps:</p>
   <ol>
    <li data-md="">
     <p>Let <var>shallowestTargetDepth</var> be ∞</p>
    <li data-md="">
     <p>For each <var>observer</var> in <var>document</var>.<code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers-5">resizeObservers</a></code> run these steps:</p>
     <ol>
      <li data-md="">
       <p>If <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-5">activeTargets</a></code> slot is empty, continue.</p>
      <li data-md="">
       <p>Let <var>entries</var> be an empty list of <code class="idl"><a data-link-type="idl" href="#resizeobserverentry" id="ref-for-resizeobserverentry-3">ResizeObserverEntry</a></code>ies.</p>
      <li data-md="">
       <p>For each <var>observation</var> in <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-6">activeTargets</a></code> perform these steps:</p>
       <ol>
        <li data-md="">
         <p>Let <var>entry</var> be new <code class="idl"><a data-link-type="idl" href="#resizeobserverentry" id="ref-for-resizeobserverentry-4">ResizeObserverEntry</a></code>(<var>observation</var>.target)</p>
        <li data-md="">
         <p>Add <var>entry</var> to <var>entries</var></p>
        <li data-md="">
         <p>Set <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastwidth" id="ref-for-dom-resizeobservation-broadcastwidth-5">broadcastWidth</a></code> to <var>entry</var>.contentRect.width.</p>
        <li data-md="">
         <p>Set <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-broadcastheight" id="ref-for-dom-resizeobservation-broadcastheight-5">broadcastHeight</a></code> to <var>entry</var>.contentRect.height.</p>
        <li data-md="">
         <p>Set <var>targetDepth</var> to the result of <a data-link-type="dfn" href="#calculate-depth-for-node" id="ref-for-calculate-depth-for-node-2">calculate depth for node</a> for <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target-10">target</a></code>.</p>
        <li data-md="">
         <p>Set <var>shallowestTargetDepth</var> to <var>targetDepth</var> if <var>targetDepth</var> &lt; <var>shallowestTargetDepth</var></p>
       </ol>
      <li data-md="">
       <p>Invoke <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-callback" id="ref-for-dom-resizeobserver-callback-2">callback</a></code> with <var>entries</var>.</p>
      <li data-md="">
       <p>Clear <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets-7">activeTargets</a></code>.</p>
     </ol>
    <li data-md="">
     <p>Return <var>shallowestTargetDepth</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="3.3.5" id="deliver-resize-error"><span class="secno">3.3.5. </span><span class="content">Deliver Resize Loop Error</span><a class="self-link" href="#deliver-resize-error"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="deliver-resize-loop-error-notification">deliver resize loop error notification</dfn> run these steps:</p>
   <ol>
    <li data-md="">
     <p>Create a new <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent">ErrorEvent</a></code>.</p>
    <li data-md="">
     <p>Initialize event’s message slot to "ResizeObserver loop completed with undelivered notifications.".</p>
    <li data-md="">
     <p>Dispach the event to document’s window.</p>
   </ol>
   <h4 class="heading settled" data-level="3.3.6" id="calculate-depth-for-node-h"><span class="secno">3.3.6. </span><span class="content">Calculate depth for node</span><a class="self-link" href="#calculate-depth-for-node-h"></a></h4>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="calculate-depth-for-node">calculate depth for node</dfn> <var>node</var> run these steps:</p>
   <ol>
    <li data-md="">
     <p>Let <var>p</var> be the parent-traversal path from <var>node</var> to enclosing <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code>.</p>
    <li data-md="">
     <p>Return length of <var>p</var>.</p>
   </ol>
   <h3 class="heading settled" data-level="3.4" id="lifetime"><span class="secno">3.4. </span><span class="content">ResizeObserver Lifetime</span><a class="self-link" href="#lifetime"></a></h3>
   <p>A <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-9">ResizeObserver</a></code> will remain alive until both of these conditions are met:</p>
   <ul>
    <li data-md="">
     <p>there are no scripting references to the observer.</p>
    <li data-md="">
     <p>the observer is not observing any targets.</p>
   </ul>
   <h3 class="heading settled" data-level="3.5" id="integrations"><span class="secno">3.5. </span><span class="content">External Spec Integrations</span><a class="self-link" href="#integrations"></a></h3>
   <h4 class="heading settled" data-level="3.5.1" id="html-event-loop"><span class="secno">3.5.1. </span><span class="content"> HTML Processing Model: Event Loop</span><a class="self-link" href="#html-event-loop"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-10">ResizeObserver</a></code> processing happens inside the step 7.12 of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">HTML Processing Model</a> event loop.</p>
   <p>Step 12 is currently underspecified as:</p>
   <p><q>For each fully active Document in docs, update the rendering or user interface of that Document and its browsing context to reflect the current state.</q>.</p>
   <p>Existing step 12 can be fully specified as:</p>
   <p>For each fully active Document in docs, run the following steps for that Document and its browsing contents:</p>
   <ol>
    <li data-md="">
     <p>recalc styles</p>
    <li data-md="">
     <p>update layout</p>
    <li data-md="">
     <p>paint</p>
   </ol>
   <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-11">ResizeObserver</a></code> extends step 12 with resize notifications.
It tries to deliver all pending notifications by looping
until no pending notifications are available. This can cause
an infinite loop.</p>
   <p>Infinite loop is prevented by shrinking the set of
nodes that can notify at every iteration. In each iteration,
only nodes deeper than the shallowest node in previous iteration
can notify.</p>
   <p>An error is generated if notification loop completes, and there
are undelivered notifications.</p>
   <p>Step 12 with <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver-12">ResizeObserver</a></code> notifications is:</p>
   <p>For each fully active Document in docs, run the following steps for that Document and its browsing contentx:</p>
   <ol>
    <li data-md="">
     <p>recalc styles</p>
    <li data-md="">
     <p>update layout</p>
    <li data-md="">
     <p>set <var>depth</var> to 0</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="#gather-active-observations-at-depth" id="ref-for-gather-active-observations-at-depth-1">gather active observations at depth</a> <var>depth</var> for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code></p>
    <li data-md="">
     <p>repeat while (document <a data-link-type="dfn" href="#has-active-observations" id="ref-for-has-active-observations-1">has active observations</a>)</p>
     <ol start="2">
      <li data-md="">
       <p>set <var>depth</var> to <a data-link-type="dfn" href="#broadcast-active-observations" id="ref-for-broadcast-active-observations-2">broadcast active observations</a></p>
      <li data-md="">
       <p>recalc styles</p>
      <li data-md="">
       <p>update layout</p>
      <li data-md="">
       <p><a data-link-type="dfn" href="#gather-active-observations-at-depth" id="ref-for-gather-active-observations-at-depth-2">gather active observations at depth</a> <var>depth</var> for <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code></p>
     </ol>
    <li data-md="">
     <p>if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document">Document</a></code> <a data-link-type="dfn" href="#has-skipped-observations" id="ref-for-has-skipped-observations-1">has skipped observations</a> then <a data-link-type="dfn" href="#deliver-resize-loop-error-notification" id="ref-for-deliver-resize-loop-error-notification-1">deliver resize loop error notification</a></p>
   </ol>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-resizeobserver-activetargets">activeTargets</a><span>, in §3.1.2</span>
   <li><a href="#broadcast-active-observations">broadcast active observations</a><span>, in §3.3.4</span>
   <li><a href="#dom-resizeobservation-broadcastheight">broadcastHeight</a><span>, in §2.4</span>
   <li><a href="#dom-resizeobservation-broadcastwidth">broadcastWidth</a><span>, in §2.4</span>
   <li><a href="#calculate-depth-for-node">calculate depth for node</a><span>, in §3.3.6</span>
   <li><a href="#dom-resizeobserver-callback">callback</a><span>, in §3.1.2</span>
   <li><a href="#content-rect">content rect</a><span>, in §3.2.1</span>
   <li><a href="#dom-resizeobserverentry-contentrect">contentRect</a><span>, in §2.3</span>
   <li><a href="#deliver-resize-loop-error-notification">deliver resize loop error notification</a><span>, in §3.3.5</span>
   <li><a href="#dom-resizeobserver-disconnect">disconnect()</a><span>, in §2.1</span>
   <li><a href="#gather-active-observations-at-depth">gather active observations at depth</a><span>, in §3.3.1</span>
   <li><a href="#has-active-observations">has active observations</a><span>, in §3.3.2</span>
   <li><a href="#has-skipped-observations">has skipped observations</a><span>, in §3.3.3</span>
   <li><a href="#dom-resizeobservation-isactive">isActive()</a><span>, in §2.4</span>
   <li><a href="#dom-resizeobserver-observationtargets">observationTargets</a><span>, in §3.1.2</span>
   <li><a href="#dom-resizeobserver-observe">observe(target)</a><span>, in §2.1</span>
   <li><a href="#resizeobservation">ResizeObservation</a><span>, in §2.4</span>
   <li><a href="#dom-resizeobservation-resizeobservation">ResizeObservation(target)</a><span>, in §2.4</span>
   <li><a href="#resizeobserver">ResizeObserver</a><span>, in §2.1</span>
   <li><a href="#dom-resizeobserver-resizeobserver">ResizeObserver(callback)</a><span>, in §2.1</span>
   <li><a href="#callbackdef-resizeobservercallback">ResizeObserverCallback</a><span>, in §2.2</span>
   <li><a href="#resizeobserverentry">ResizeObserverEntry</a><span>, in §2.3</span>
   <li><a href="#dom-resizeobserverentry-resizeobserverentry">ResizeObserverEntry(target)</a><span>, in §2.3</span>
   <li><a href="#dom-document-resizeobservers">resizeObservers</a><span>, in §3.1.1</span>
   <li><a href="#dom-resizeobserver-skippedtargets">skippedTargets</a><span>, in §3.1.2</span>
   <li>
    target
    <ul>
     <li><a href="#dom-resizeobserverentry-target">attribute for ResizeObserverEntry</a><span>, in §2.3</span>
     <li><a href="#dom-resizeobservation-target">attribute for ResizeObservation</a><span>, in §2.4</span>
    </ul>
   <li><a href="#dom-resizeobserver-unobserve">unobserve(target)</a><span>, in §2.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[cssom-view-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.csswg.org/cssom-view-1/#eventdef-window-resize">resize</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#document">Document</a>
     <li><a href="https://dom.spec.whatwg.org/#element">Element</a>
     <li><a href="https://dom.spec.whatwg.org/#mutationobserver">MutationObserver</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
    </ul>
   <li>
    <a data-link-type="biblio">[geometry-1]</a> defines the following terms:
    <ul>
     <li><a href="https://drafts.fxtf.org/geometry-1/#domrectreadonly">DOMRectReadOnly</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent">ErrorEvent</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL-1]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
     <li><a href="https://heycam.github.io/webidl/#idl-float">float</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
   <dd>Simon Pieters. <a href="https://drafts.csswg.org/cssom-view/">CSSOM View Module</a>. 17 March 2016. WD. URL: <a href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
   <dt id="biblio-geometry-1">[GEOMETRY-1]
   <dd>Simon Pieters; Dirk Schulze; Rik Cabanier. <a href="http://dev.w3.org/fxtf/geometry/">Geometry Interfaces Module Level 1</a>. 25 November 2014. CR. URL: <a href="http://dev.w3.org/fxtf/geometry/">http://dev.w3.org/fxtf/geometry/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-webidl-1">[WebIDL-1]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobserver-resizeobserver">Constructor</a>(<a class="n" data-link-type="idl-name" href="#callbackdef-resizeobservercallback">ResizeObserverCallback</a> <a class="nv" href="#dom-resizeobserver-resizeobserver-callback-callback">callback</a>),
    <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <a class="nv" href="#resizeobserver">ResizeObserver</a> {
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-observe">observe</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv" href="#dom-resizeobserver-observe-target-target">target</a>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-unobserve">unobserve</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv" href="#dom-resizeobserver-unobserve-target-target">target</a>);
    <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobserver-disconnect">disconnect</a>();
};

<span class="kt">callback</span> <a class="nv" href="#callbackdef-resizeobservercallback">ResizeObserverCallback</a> = <span class="kt">void</span> (<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#resizeobserverentry">ResizeObserverEntry</a>> <a class="nv" href="#dom-resizeobservercallback-entries">entries</a>, <a class="n" data-link-type="idl-name" href="#resizeobserver">ResizeObserver</a> <a class="nv" href="#dom-resizeobservercallback-observer">observer</a>)

[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobserverentry-resizeobserverentry">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv" href="#dom-resizeobserverentry-resizeobserverentry-target-target">target</a>)
]
<span class="kt">interface</span> <a class="nv" href="#resizeobserverentry">ResizeObserverEntry</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Element" href="#dom-resizeobserverentry-target">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly">DOMRectReadOnly</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMRectReadOnly" href="#dom-resizeobserverentry-contentrect">contentRect</a>;
};

[<a class="nv idl-code" data-link-type="constructor" href="#dom-resizeobservation-resizeobservation">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv" href="#dom-resizeobservation-resizeobservation-target-target">target</a>)
]
<span class="kt">interface</span> <a class="nv" href="#resizeobservation">ResizeObservation</a> {
    <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element">Element</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="Element" href="#dom-resizeobservation-target">target</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">float</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="float" href="#dom-resizeobservation-broadcastwidth">broadcastWidth</a>;
    <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">float</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="float" href="#dom-resizeobservation-broadcastheight">broadcastHeight</a>;
    <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="method" href="#dom-resizeobservation-isactive">isActive</a>();
};

</pre>
  <aside class="dfn-panel" data-for="resizeobserver">
   <b><a href="#resizeobserver">#resizeobserver</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resizeobserver-1">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-resizeobserver-2">2.2. ResizeObserverCallback</a> <a href="#ref-for-resizeobserver-3">(2)</a>
    <li><a href="#ref-for-resizeobserver-4">3.1.1. Document</a>
    <li><a href="#ref-for-resizeobserver-5">3.1.2. ResizeObserver</a> <a href="#ref-for-resizeobserver-6">(2)</a> <a href="#ref-for-resizeobserver-7">(3)</a> <a href="#ref-for-resizeobserver-8">(4)</a>
    <li><a href="#ref-for-resizeobserver-9">3.4. ResizeObserver Lifetime</a>
    <li><a href="#ref-for-resizeobserver-10">3.5.1.  HTML Processing Model: Event Loop</a> <a href="#ref-for-resizeobserver-11">(2)</a> <a href="#ref-for-resizeobserver-12">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-resizeobserver">
   <b><a href="#dom-resizeobserver-resizeobserver">#dom-resizeobserver-resizeobserver</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-resizeobserver-1">2.1. ResizeObserver interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-observe">
   <b><a href="#dom-resizeobserver-observe">#dom-resizeobserver-observe</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-observe-1">2.1. ResizeObserver interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-unobserve">
   <b><a href="#dom-resizeobserver-unobserve">#dom-resizeobserver-unobserve</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-unobserve-1">2.1. ResizeObserver interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-disconnect">
   <b><a href="#dom-resizeobserver-disconnect">#dom-resizeobserver-disconnect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-disconnect-1">2.1. ResizeObserver interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="callbackdef-resizeobservercallback">
   <b><a href="#callbackdef-resizeobservercallback">#callbackdef-resizeobservercallback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-callbackdef-resizeobservercallback-1">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-callbackdef-resizeobservercallback-2">2.3. ResizeObserverEntry</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resizeobserverentry">
   <b><a href="#resizeobserverentry">#resizeobserverentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resizeobserverentry-1">2.2. ResizeObserverCallback</a>
    <li><a href="#ref-for-resizeobserverentry-2">2.3. ResizeObserverEntry</a>
    <li><a href="#ref-for-resizeobserverentry-3">3.3.4. Broadcast active observations</a> <a href="#ref-for-resizeobserverentry-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserverentry-target">
   <b><a href="#dom-resizeobserverentry-target">#dom-resizeobserverentry-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserverentry-target-1">2.3. ResizeObserverEntry</a> <a href="#ref-for-dom-resizeobserverentry-target-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserverentry-contentrect">
   <b><a href="#dom-resizeobserverentry-contentrect">#dom-resizeobserverentry-contentrect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserverentry-contentrect-1">2.3. ResizeObserverEntry</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserverentry-resizeobserverentry">
   <b><a href="#dom-resizeobserverentry-resizeobserverentry">#dom-resizeobserverentry-resizeobserverentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserverentry-resizeobserverentry-1">2.3. ResizeObserverEntry</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="resizeobservation">
   <b><a href="#resizeobservation">#resizeobservation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resizeobservation-1">2.1. ResizeObserver interface</a> <a href="#ref-for-resizeobservation-2">(2)</a>
    <li><a href="#ref-for-resizeobservation-3">2.4. ResizeObservation</a>
    <li><a href="#ref-for-resizeobservation-4">3.1.2. ResizeObserver</a> <a href="#ref-for-resizeobservation-5">(2)</a> <a href="#ref-for-resizeobservation-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobservation-target">
   <b><a href="#dom-resizeobservation-target">#dom-resizeobservation-target</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobservation-target-1">2.4. ResizeObservation</a> <a href="#ref-for-dom-resizeobservation-target-2">(2)</a> <a href="#ref-for-dom-resizeobservation-target-3">(3)</a> <a href="#ref-for-dom-resizeobservation-target-4">(4)</a> <a href="#ref-for-dom-resizeobservation-target-5">(5)</a> <a href="#ref-for-dom-resizeobservation-target-6">(6)</a> <a href="#ref-for-dom-resizeobservation-target-7">(7)</a> <a href="#ref-for-dom-resizeobservation-target-8">(8)</a>
    <li><a href="#ref-for-dom-resizeobservation-target-9">3.3.1. Gather active observations at depth</a>
    <li><a href="#ref-for-dom-resizeobservation-target-10">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobservation-broadcastwidth">
   <b><a href="#dom-resizeobservation-broadcastwidth">#dom-resizeobservation-broadcastwidth</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobservation-broadcastwidth-1">2.4. ResizeObservation</a> <a href="#ref-for-dom-resizeobservation-broadcastwidth-2">(2)</a> <a href="#ref-for-dom-resizeobservation-broadcastwidth-3">(3)</a> <a href="#ref-for-dom-resizeobservation-broadcastwidth-4">(4)</a>
    <li><a href="#ref-for-dom-resizeobservation-broadcastwidth-5">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobservation-broadcastheight">
   <b><a href="#dom-resizeobservation-broadcastheight">#dom-resizeobservation-broadcastheight</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobservation-broadcastheight-1">2.4. ResizeObservation</a> <a href="#ref-for-dom-resizeobservation-broadcastheight-2">(2)</a> <a href="#ref-for-dom-resizeobservation-broadcastheight-3">(3)</a> <a href="#ref-for-dom-resizeobservation-broadcastheight-4">(4)</a>
    <li><a href="#ref-for-dom-resizeobservation-broadcastheight-5">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobservation-resizeobservation">
   <b><a href="#dom-resizeobservation-resizeobservation">#dom-resizeobservation-resizeobservation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobservation-resizeobservation-1">2.4. ResizeObservation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobservation-isactive">
   <b><a href="#dom-resizeobservation-isactive">#dom-resizeobservation-isactive</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobservation-isactive-1">2.4. ResizeObservation</a>
    <li><a href="#ref-for-dom-resizeobservation-isactive-2">3.3.1. Gather active observations at depth</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-document-resizeobservers">
   <b><a href="#dom-document-resizeobservers">#dom-document-resizeobservers</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-resizeobservers-1">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-dom-document-resizeobservers-2">3.3.1. Gather active observations at depth</a>
    <li><a href="#ref-for-dom-document-resizeobservers-3">3.3.2. Has active observations</a>
    <li><a href="#ref-for-dom-document-resizeobservers-4">3.3.3. Has skipped observations</a>
    <li><a href="#ref-for-dom-document-resizeobservers-5">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-callback">
   <b><a href="#dom-resizeobserver-callback">#dom-resizeobserver-callback</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-callback-1">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-dom-resizeobserver-callback-2">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-observationtargets">
   <b><a href="#dom-resizeobserver-observationtargets">#dom-resizeobserver-observationtargets</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-observationtargets-1">2.1. ResizeObserver interface</a> <a href="#ref-for-dom-resizeobserver-observationtargets-2">(2)</a> <a href="#ref-for-dom-resizeobserver-observationtargets-3">(3)</a> <a href="#ref-for-dom-resizeobserver-observationtargets-4">(4)</a> <a href="#ref-for-dom-resizeobserver-observationtargets-5">(5)</a>
    <li><a href="#ref-for-dom-resizeobserver-observationtargets-6">3.3.1. Gather active observations at depth</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-activetargets">
   <b><a href="#dom-resizeobserver-activetargets">#dom-resizeobserver-activetargets</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-activetargets-1">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-dom-resizeobserver-activetargets-2">3.3.1. Gather active observations at depth</a> <a href="#ref-for-dom-resizeobserver-activetargets-3">(2)</a>
    <li><a href="#ref-for-dom-resizeobserver-activetargets-4">3.3.2. Has active observations</a>
    <li><a href="#ref-for-dom-resizeobserver-activetargets-5">3.3.4. Broadcast active observations</a> <a href="#ref-for-dom-resizeobserver-activetargets-6">(2)</a> <a href="#ref-for-dom-resizeobserver-activetargets-7">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-resizeobserver-skippedtargets">
   <b><a href="#dom-resizeobserver-skippedtargets">#dom-resizeobserver-skippedtargets</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-resizeobserver-skippedtargets-1">3.3.1. Gather active observations at depth</a> <a href="#ref-for-dom-resizeobserver-skippedtargets-2">(2)</a>
    <li><a href="#ref-for-dom-resizeobserver-skippedtargets-3">3.3.3. Has skipped observations</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="content-rect">
   <b><a href="#content-rect">#content-rect</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-content-rect-1">1. Introduction</a> <a href="#ref-for-content-rect-2">(2)</a>
    <li><a href="#ref-for-content-rect-3">2.1. ResizeObserver interface</a>
    <li><a href="#ref-for-content-rect-4">2.3. ResizeObserverEntry</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="gather-active-observations-at-depth">
   <b><a href="#gather-active-observations-at-depth">#gather-active-observations-at-depth</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-gather-active-observations-at-depth-1">3.5.1.  HTML Processing Model: Event Loop</a> <a href="#ref-for-gather-active-observations-at-depth-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="has-active-observations">
   <b><a href="#has-active-observations">#has-active-observations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-has-active-observations-1">3.5.1.  HTML Processing Model: Event Loop</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="has-skipped-observations">
   <b><a href="#has-skipped-observations">#has-skipped-observations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-has-skipped-observations-1">3.5.1.  HTML Processing Model: Event Loop</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="broadcast-active-observations">
   <b><a href="#broadcast-active-observations">#broadcast-active-observations</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-broadcast-active-observations-1">2.2. ResizeObserverCallback</a>
    <li><a href="#ref-for-broadcast-active-observations-2">3.5.1.  HTML Processing Model: Event Loop</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="deliver-resize-loop-error-notification">
   <b><a href="#deliver-resize-loop-error-notification">#deliver-resize-loop-error-notification</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-deliver-resize-loop-error-notification-1">3.5.1.  HTML Processing Model: Event Loop</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="calculate-depth-for-node">
   <b><a href="#calculate-depth-for-node">#calculate-depth-for-node</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-calculate-depth-for-node-1">3.3.1. Gather active observations at depth</a>
    <li><a href="#ref-for-calculate-depth-for-node-2">3.3.4. Broadcast active observations</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>
